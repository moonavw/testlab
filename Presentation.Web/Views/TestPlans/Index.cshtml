@model IEnumerable<TestLab.Domain.TestPlan>

@{
    ViewBag.Title = "TestPlans";
}

<h2>TestPlans</h2>

<p>
    @{
        var routeData = ViewContext.RouteData.Values["testprojectId"] == null ? new { testprojectId = ViewContext.RouteData.Values["id"] } : null;
        }
    @Html.ActionLink("Create New", "New", "TestPlans", routeData, new { @class = "btn btn-default" })
</p>

@Html.Grid(Model).Columns(c =>
{
    c.Add()
     .Encoded(false)
     .Sanitized(false)
     .SetWidth(30)
     .RenderValueAs(d =>
                        Html.ActionLink("Open", "Show", new {id = d.Id}, new {@class = "btn btn-default"})
        );
    
    c.Add(o => o.Id);

    c.Add(o => o.Name);

    c.Add(o => o.Cases.Count);

    c.Add(o => o.Sessions.Count);
    
}).Sortable().Filterable().WithMultipleFilters().WithPaging(20)

@section scripts{
    @Scripts.Render("~/bundles/gridmvc")
}

@section breadcrumb{
    <ol class="breadcrumb">
        <li>@Html.ActionLink("Project", "Show", "TestProjects", new { id = ViewContext.RouteData.Values["testprojectId"] }, null)</li>
        <li class="active">Plans</li>
    </ol>
}